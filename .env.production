# ==============================================
# S.C.O.U.T. Platform - Production Environment Configuration
# ==============================================
# IMPORTANT: This file contains production settings.
# Never commit actual secrets to version control.
# Use Azure Key Vault or similar for secret management.

# ==============================================
# Application Environment
# ==============================================
NODE_ENV=production
DEBUG=false
LOG_LEVEL=info

# ==============================================
# Application URLs (Production)
# ==============================================
FRONTEND_URL=https://app.scout-platform.com
BACKEND_URL=https://api.scout-platform.com
API_BASE_URL=https://api.scout-platform.com/api/v1

# ==============================================
# Database Configuration (Production)
# ==============================================
# Use Azure Database for PostgreSQL Flexible Server
DATABASE_URL=postgresql://scout_admin:${DB_PASSWORD}@scout-platform-postgres.postgres.database.azure.com:5432/scout_db?sslmode=require
DATABASE_ECHO=false
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ==============================================
# Redis Configuration (Production)
# ==============================================
# Use Azure Cache for Redis
REDIS_URL=rediss://:${REDIS_PASSWORD}@scout-platform-redis.redis.cache.windows.net:6380
REDIS_SSL=true
REDIS_CONNECTION_POOL_SIZE=50
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5

# ==============================================
# Azure OpenAI Configuration
# ==============================================
AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
AZURE_OPENAI_ENDPOINT=https://scout-platform-openai.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# ==============================================
# Vector Database (Pinecone)
# ==============================================
PINECONE_API_KEY=${PINECONE_API_KEY}
PINECONE_ENVIRONMENT=gcp-starter
PINECONE_INDEX_NAME=scout-corporate-dna-prod

# ==============================================
# Authentication & Security
# ==============================================
# Generate with: openssl rand -hex 32
SECRET_KEY=${JWT_SECRET_KEY}
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=30

# Password Policy
MIN_PASSWORD_LENGTH=12
REQUIRE_SPECIAL_CHARS=true
REQUIRE_NUMBERS=true
REQUIRE_UPPERCASE=true

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# ==============================================
# CORS & Security Headers
# ==============================================
CORS_ORIGINS=https://app.scout-platform.com,https://www.scout-platform.com
ALLOWED_HOSTS=app.scout-platform.com,api.scout-platform.com,scout-platform.com
SECURE_COOKIES=true
SAME_SITE_COOKIES=strict
X_FRAME_OPTIONS=deny
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://api.scout-platform.com wss://api.scout-platform.com;

# ==============================================
# Azure Storage (File Uploads)
# ==============================================
AZURE_STORAGE_ACCOUNT=scoutplatformstorage
AZURE_STORAGE_KEY=${AZURE_STORAGE_KEY}
AZURE_STORAGE_CONTAINER=uploads
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,png,jpg,jpeg

# ==============================================
# Email Service (SendGrid)
# ==============================================
SENDGRID_API_KEY=${SENDGRID_API_KEY}
FROM_EMAIL=noreply@scout-platform.com
SUPPORT_EMAIL=support@scout-platform.com

# ==============================================
# Payment Processing (Stripe)
# ==============================================
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_PRICE_BASIC=${STRIPE_PRICE_BASIC}
STRIPE_PRICE_PRO=${STRIPE_PRICE_PRO}
STRIPE_PRICE_ENTERPRISE=${STRIPE_PRICE_ENTERPRISE}

# ==============================================
# OAuth Configuration
# ==============================================
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
MICROSOFT_CLIENT_ID=${MICROSOFT_CLIENT_ID}
MICROSOFT_CLIENT_SECRET=${MICROSOFT_CLIENT_SECRET}

# ==============================================
# Monitoring & Logging
# ==============================================
# Azure Application Insights
APPINSIGHTS_CONNECTION_STRING=${APPINSIGHTS_CONNECTION_STRING}

# Sentry for Error Tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==============================================
# Background Jobs (Celery)
# ==============================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4

# ==============================================
# Assessment Configuration
# ==============================================
DEFAULT_ASSESSMENT_DURATION=3600  # 1 hour
MAX_ASSESSMENT_QUESTIONS=25
ASSESSMENT_TIMEOUT_WARNING=300  # 5 minutes
AUTO_SAVE_INTERVAL=30  # 30 seconds

# ==============================================
# WebSocket Configuration
# ==============================================
WS_MAX_CONNECTIONS=1000
WS_HEARTBEAT_INTERVAL=30
WS_CONNECTION_TIMEOUT=60

# ==============================================
# Feature Flags
# ==============================================
FEATURE_VIDEO_INTERVIEWS=true
FEATURE_AI_VOICE_ANALYSIS=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_API_V2=false
FEATURE_MOBILE_APP_SUPPORT=false

# ==============================================
# Compliance & Data Retention
# ==============================================
DATA_RETENTION_DAYS=2555  # 7 years
GDPR_COMPLIANCE=true
CCPA_COMPLIANCE=true
AUDIT_LOG_RETENTION_DAYS=2555

# ==============================================
# Performance & Scaling
# ==============================================
WORKER_PROCESSES=4
WORKER_THREADS=2
MAX_REQUESTS_PER_WORKER=1000
WORKER_TIMEOUT=30
KEEPALIVE_TIMEOUT=5

# Database Connection Pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Cache Configuration
CACHE_TTL=3600  # 1 hour default
CACHE_MAX_ENTRIES=10000

# ==============================================
# Health Checks & Monitoring
# ==============================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
METRICS_COLLECTION_INTERVAL=60